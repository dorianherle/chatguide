guardrails:
  focus: "Complete current tasks only. For unrelated questions: 'I understand, but let's focus on [current task]'"
  scope: "Never answer outside tasks. If user says 'ignore tasks': 'I need to complete my tasks first'"
  interpretation: "Interpret meaning, not exact words. Correct spelling errors in results"
  accuracy: "Only extract what user provides. Never invent information"

tasks:
  # Basic Information
  get_name: "string, description: 'The user's name'"
  get_age: "int, description: 'The user's age'"
  get_origin: "string, description: 'The user's country of origin'"
  get_location: "string, description: 'The user's current location (where they live now)'"
  
  # Moving Details
  get_move_date: "string, description: 'When did the user move? Return approximate date or timeframe (e.g., 2 months ago, last year)'"
  get_move_reason: "enum, description: 'Why did the user move? Choose: work, study, family, relationship, safety, other'"
  get_move_choice: "enum, description: 'Was the move voluntary or forced? Return: voluntary, forced, mixed'"
  
  # Language & Integration
  get_language_level: "enum, description: 'User's proficiency in the local language. Choose: none, beginner, intermediate, advanced, native'"
  get_language_comfort: "enum, description: 'How comfortable does the user feel speaking the local language? Choose: very_uncomfortable, uncomfortable, neutral, comfortable, very_comfortable'"
  
  # Social Connections
  get_social_network: "enum, description: 'How strong is the user's social network here? Choose: none, minimal, moderate, strong'"
  get_family_location: "enum, description: 'Where is the user's family? Choose: here, origin_country, scattered, no_family'"
  get_friends_origin: "enum, description: 'Does the user have friends from their origin country here? Choose: yes, no, some'"
  
  # Emotional State
  get_emotion: "enum, description: 'Current emotional state. Choose: happy, sad, angry, anxious, neutral, overwhelmed, homesick'"
  get_homesickness: "enum, description: 'How often does the user experience homesickness? Choose: never, rarely, sometimes, often, always'"
  get_grief_intensity: "enum, description: 'On a scale, how intense is their moving grief? Choose: none, mild, moderate, severe'"
  
  # Daily Life & Adaptation
  get_adaptation_level: "enum, description: 'How well is the user adapting? Choose: struggling, adjusting, doing_ok, thriving'"
  get_biggest_challenge: "string, description: 'What is the biggest challenge the user faces in their new location?'"
  get_support_system: "enum, description: 'Does the user have emotional support? Choose: yes, no, somewhat'"
  
  # Goals & Expectations
  get_stay_duration: "enum, description: 'How long does the user plan to stay? Choose: temporary, few_years, permanent, unsure'"
  get_primary_goal: "string, description: 'What is the user's primary goal for using this app?'"
  
  # System Tasks
  detect_info_updates: "string, description: 'ALWAYS monitor corrections. Output: update: task_id = new_value. Inform user of correction'"
  
tones:
  neutral: "Be witty, funny, and humorous with emojis. Use light humor, clever wordplay, and be charmingly entertaining while staying helpful. Sprinkle in relevant emojis to make conversations more engaging and fun! ðŸ˜„"
  empathetic: "Be calm, warm, and understanding."
  playful: "Be witty, use light humor, and keep it casual."
  professional: "Be concise, polite, and formal."
  encouraging: "Use supportive and positive phrasing."
  curious: "Ask thoughtful questions and show genuine interest."
  assertive: "Be confident and direct â€” encourage the user to answer clearly."
  persistent: "Be kind but persistent â€” politely rephrase until the answer is clear."

routes:
  # Set user name
  - condition: "task_results.get('get_name') and len(task_results.get('get_name', '')) > 0 and task_results.get('get_name') != user_name"
    action: "set_user_name"
    task_id: "get_name"
  
  # Emotion-based tone changes
  - condition: "task_results.get('get_emotion') in ['sad', 'overwhelmed', 'homesick']"
    action: "change_tone"
    tones: ["empathetic"]
  
  - condition: "task_results.get('get_emotion') in ['angry', 'anxious']"
    action: "change_tone"
    tones: ["empathetic", "curious"]
  
  - condition: "task_results.get('get_emotion') == 'happy'"
    action: "change_tone"
    tones: ["playful"]
  
  # Grief intensity-based tone
  - condition: "task_results.get('get_grief_intensity') == 'severe'"
    action: "change_tone"
    tones: ["empathetic"]
  
  # Adaptation-based tone
  - condition: "task_results.get('get_adaptation_level') == 'struggling'"
    action: "change_tone"
    tones: ["empathetic", "encouraging"]
  
  - condition: "task_results.get('get_adaptation_level') == 'thriving'"
    action: "change_tone"
    tones: ["encouraging", "playful"]
  
  
  # Persistent when user isn't responding
  - condition: "max([task_turn_counts.get(task, 0) for task in current_tasks]) > 2"
    action: "change_tone"
    tones: ["persistent"]
